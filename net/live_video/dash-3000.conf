# 虚拟主机的配置
server {
    # 侦听 3000 端口，分别配置了 IPv4 和 IPv6
    listen 3000 default_server;

    # 定义虚拟服务器的名称
    server_name localhost;

    # location 块

    location / {
        root /home/lcy/srt_panoramic/net/live_video/www;
        try_files $uri $uri/ /404.tml;
    }

    location = /baidu {
        proxy_pass  https://www.baidu.com/;
    }

    location = /404.html {
        return 404 $uri;
    }

    location ~ ^/(.*).mpd$ {
        root   /home/lcy/srt_tmp/dash;
        index  index.html index.htm;
        add_header Access-Control-Allow-Headers origin,range,hdntl,hdnts,accept-encoding,referer,CMCD-Request,CMCD-Object,CMCD-Status,CMCD-Session;
        add_header Access-Control-Allow-Origin *;
        add_header Content-Type application/dash+xml;
        break;
    }

    location ~ ^/(.*).m4s$ {
        root   /home/lcy/srt_tmp/dash;
        index  index.html index.htm;
        add_header Access-Control-Allow-Headers origin,range,hdntl,hdnts,accept-encoding,referer,CMCD-Request,CMCD-Object,CMCD-Status,CMCD-Session;
        add_header Access-Control-Allow-Origin *;
        break;
    }

    location ~ ^/(.*).mp4$ {
        root   /home/lcy/srt_tmp/dash;
        index  index.html index.htm;
        add_header Access-Control-Allow-Headers origin,range,hdntl,hdnts,accept-encoding,referer,CMCD-Request,CMCD-Object,CMCD-Status,CMCD-Session;
        add_header Access-Control-Allow-Origin *;
        break;
    }
}
